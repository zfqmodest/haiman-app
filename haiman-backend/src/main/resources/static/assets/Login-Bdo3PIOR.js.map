{"version":3,"file":"Login-Bdo3PIOR.js","sources":["../../src/pages/auth/Login.vue"],"sourcesContent":["<template>\n  <VaForm ref=\"form\" @submit.prevent=\"submit\">\n    <h1 class=\"font-semibold text-4xl mb-4\">登 录</h1>\n    <VaInput\n      v-model=\"formData.username\"\n      :rules=\"[validators.required]\"\n      class=\"mb-4\"\n      label=\"用户名\"\n      type=\"text\"\n      :disabled=\"isLoading\"\n    />\n    <VaValue v-slot=\"isPasswordVisible\" :default-value=\"false\">\n      <VaInput\n        v-model=\"formData.password\"\n        :rules=\"[validators.required]\"\n        :type=\"isPasswordVisible.value ? 'text' : 'password'\"\n        class=\"mb-4\"\n        label=\"密码\"\n        @clickAppendInner.stop=\"isPasswordVisible.value = !isPasswordVisible.value\"\n      >\n        <template #appendInner>\n          <VaIcon\n            :name=\"isPasswordVisible.value ? 'mso-visibility_off' : 'mso-visibility'\"\n            class=\"cursor-pointer\"\n            color=\"secondary\"\n          />\n        </template>\n      </VaInput>\n    </VaValue>\n\n    <div class=\"auth-layout__options flex flex-col sm:flex-row items-start sm:items-center justify\">\n      <RouterLink :to=\"{ name: 'recover-password' }\" class=\"mt-2 sm:mt-0 sm:ml-1 font-semibold text-primary\">\n        忘记密码?\n      </RouterLink>\n    </div>\n\n    <div class=\"flex justify-center mt-4\">\n      <VaButton class=\"w-full\" @click=\"submit\"> 登 录</VaButton>\n    </div>\n  </VaForm>\n</template>\n\n<script lang=\"ts\" setup>\nimport { reactive, ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useForm, useToast } from 'vuestic-ui'\nimport { useUserStore } from '../../stores/user-store'\nimport { validators } from '../../services/utils'\n\nconst { validate } = useForm('form')\nconst { push: routerPush } = useRouter()\nconst { init } = useToast()\nconst userStore = useUserStore()\n\nconst isLoading = ref(false)\n\nconst formData = reactive({\n  username: '',\n  password: '',\n})\n\nconst submit = async () => {\n  if (!validate()) return\n\n  isLoading.value = true\n\n  try {\n    const result = await userStore.login({\n      username: formData.username,\n      password: formData.password,\n    })\n\n    if (result.success) {\n      init({\n        message: `欢迎回来，${result.data.fullName}！`,\n        color: 'success',\n      })\n      await routerPush('/admin/users')\n    } else {\n      init({\n        message: result.message || '登录失败，请检查用户名和密码',\n        color: 'danger',\n      })\n    }\n  } catch (error: any) {\n    console.error('登录错误:', error)\n    init({\n      message: '登录失败，请稍后重试',\n      color: 'danger',\n    })\n  } finally {\n    isLoading.value = false\n  }\n}\n</script>\n"],"names":["validate","useForm","routerPush","useRouter","init","useToast","userStore","useUserStore","isLoading","ref","formData","reactive","submit","result","error"],"mappings":"+XAiDA,KAAM,CAAE,SAAAA,CAAA,EAAaC,EAAQ,MAAM,EAC7B,CAAE,KAAMC,CAAW,EAAIC,EAAU,EACjC,CAAE,KAAAC,GAASC,IACXC,EAAYC,IAEZC,EAAYC,EAAI,EAAK,EAErBC,EAAWC,EAAS,CACxB,SAAU,GACV,SAAU,EAAA,CACX,EAEKC,EAAS,SAAY,CACrB,GAACZ,IAEL,CAAAQ,EAAU,MAAQ,GAEd,GAAA,CACI,MAAAK,EAAS,MAAMP,EAAU,MAAM,CACnC,SAAUI,EAAS,SACnB,SAAUA,EAAS,QAAA,CACpB,EAEGG,EAAO,SACJT,EAAA,CACH,QAAS,QAAQS,EAAO,KAAK,QAAQ,IACrC,MAAO,SAAA,CACR,EACD,MAAMX,EAAW,cAAc,GAE1BE,EAAA,CACH,QAASS,EAAO,SAAW,iBAC3B,MAAO,QAAA,CACR,QAEIC,EAAY,CACX,QAAA,MAAM,QAASA,CAAK,EACvBV,EAAA,CACH,QAAS,aACT,MAAO,QAAA,CACR,CAAA,QACD,CACAI,EAAU,MAAQ,EACpB,EAAA"}